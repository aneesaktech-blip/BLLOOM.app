<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Admin Dashboard — BLLOOM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- AUTH CHECK (ADMIN ONLY) -->
  <script>
    const currentUser = JSON.parse(localStorage.getItem("currentUser"));
    if (!currentUser || currentUser.role !== "admin") {
      window.location.href = "login.html";
    }
  </script>

  <!-- FONTS -->
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="admin.css">
</head>

<body>

  <!-- HEADER -->
  <header class="admin-header">
    <div class="brand">BLLOOM ADMIN</div>
    <button class="logout-btn" onclick="logout()">Logout</button>
  </header>

  <!-- MAIN -->
 <main class="admin-wrapper">
  <h1>Admin Dashboard</h1>
  <p class="subtitle">Manage BLLOOM platform</p>

  <!-- PRODUCTS -->
  <section class="admin-section">
    <h2>Products</h2>

    <div class="admin-box">
      <input id="pName" placeholder="Product name">
      <input id="pPrice" placeholder="Price">
      <input id="pCategory" placeholder="Category (women/men/kids)">
      <button onclick="addProduct()">Add Product</button>
    </div>

    <div id="productList" class="list"></div>
  </section>

  <!-- COUPONS -->
  <section class="admin-section">
    <h2>Coupons</h2>

    <div class="admin-box">
      <input id="cCode" placeholder="Coupon code">
      <input id="cDiscount" placeholder="Discount %">
      <button onclick="addCoupon()">Add Coupon</button>
    </div>

    <div id="couponList" class="list"></div>
  </section>

  <!-- ORDERS -->
  <section class="admin-section">
  <h2>Products</h2>

  <div class="admin-box grid">
    <input id="pName" placeholder="Product name">
    <input id="pPrice" placeholder="Price">
    <input id="pDiscount" placeholder="Discount %">
    <input id="pColor" placeholder="Color">
    <input id="pSize" placeholder="Sizes (S,M,L)">
    <input id="pCategory" placeholder="Category (women/men/kids)">
    <input id="pImage" placeholder="Image URL">
    <textarea id="pDesc" placeholder="Description"></textarea>

    <button onclick="addProduct()">Add Product</button>
  </div>

  <div id="productList" class="list"></div>
</section>

</main>

 <script>
function logout() {
  localStorage.removeItem("currentUser");
  localStorage.removeItem("isLoggedIn");
  window.location.href = "login.html";
}

/* ---------------- PRODUCTS ---------------- */
<script>
function addProduct() {
  const product = {
    id: "P" + Date.now(),
    name: pName.value,
    price: pPrice.value,
    discount: pDiscount.value,
    color: pColor.value,
    size: pSize.value,
    category: pCategory.value,
    image: pImage.value,
    description: pDesc.value
  };

  if (!product.name || !product.price) {
    alert("Product name & price required");
    return;
  }

  const products = JSON.parse(localStorage.getItem("products")) || [];
  products.push(product);
  localStorage.setItem("products", JSON.stringify(products));

  renderProducts();
}

function renderProducts() {
  const products = JSON.parse(localStorage.getItem("products")) || [];
  productList.innerHTML = products.map(p => `
    <div class="product-admin">
      <img src="${p.image}" />
      <div>
        <b>${p.name}</b>
        <p>₹${p.price} (${p.discount || 0}% off)</p>
        <p>${p.color} | ${p.size}</p>
        <p>${p.category}</p>
        <small>${p.description}</small>
      </div>
    </div>
  `).join("");
}

renderProducts();
</script>

/* ---------------- COUPONS ---------------- */
function addCoupon() {
  const code = cCode.value.toUpperCase();
  const discount = cDiscount.value;

  if (!code || !discount) return alert("Fill all fields");

  const coupons = JSON.parse(localStorage.getItem("coupons")) || [];
  coupons.push({ code, discount });

  localStorage.setItem("coupons", JSON.stringify(coupons));
  renderCoupons();
}

function renderCoupons() {
  const coupons = JSON.parse(localStorage.getItem("coupons")) || [];
  couponList.innerHTML = coupons.map(c =>
    `<div><b>${c.code}</b> — ${c.discount}% OFF</div>`
  ).join("");
}

/* ---------------- ORDERS ---------------- */
function renderOrders() {
  const orders = JSON.parse(localStorage.getItem("orders")) || [];
  orderList.innerHTML = orders.map(o =>
    `<div>Order ${o.id || ""} — ₹${o.amount} — ${o.status || "Paid"}</div>`
  ).join("");
}

/* ---------------- USERS ---------------- */
function renderUsers() {
  const users = JSON.parse(localStorage.getItem("users")) || [];
  userList.innerHTML = users.map(u =>
    `<div><b>${u.name}</b> — ${u.email} (${u.role})</div>`
  ).join("");
}

/* INIT */
renderProducts();
renderCoupons();
renderOrders();
renderUsers();
</script>

</body>
</html>
